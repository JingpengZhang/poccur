{"_path":"/blog/dev-notes/webpack","_dir":"dev-notes","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"初学 Webpack","description":"初学 Webpack。","slug":"webpack-of-first-learning","category":"dev-notes","createtime":"2023-08-23 10:11","cover":"/images/content/cover/webpack.jpg","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"初学-webpack"},"children":[{"type":"text","value":"初学 Webpack"}]},{"type":"element","tag":"h2","props":{"id":"_1-初始化包管理配置文件"},"children":[{"type":"text","value":"1 初始化包管理配置文件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm init -y "}]}]},{"type":"element","tag":"h2","props":{"id":"_2-安装jquery"},"children":[{"type":"text","value":"2 安装jQuery"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install jquery -S"}]}]},{"type":"element","tag":"h2","props":{"id":"_3-在项目中安装webpack"},"children":[{"type":"text","value":"3 在项目中安装webpack"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装webpack ： "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install webpack"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装 webpack-cli ："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install webpack-cli --save-dev"}]}]},{"type":"element","tag":"h2","props":{"id":"_4-在项目中配置webpack"},"children":[{"type":"text","value":"4 在项目中配置webpack"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"① 在项目根目录中，创建名为 webpack.config.js 的 webpack 配置文件，并初始化如下的基本配置："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"module.exports = {\n    mode: 'development' // mode 用来指定构建模式。可选值有 development 和 production\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    mode: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'development'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// mode 用来指定构建模式。可选值有 development 和 production\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"② 在 package.json 的 scripts 节点下，新增 dev 脚本如下："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"\"script\":{\n    \"dev\": \"webpack\" // script 节点下的脚本，可以通过 npm run 执行。例如 npm run dev\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"script\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":":{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"dev\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"webpack\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// script 节点下的脚本，可以通过 npm run 执行。例如 npm run dev\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"③ 在终端中运行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run dev"}]},{"type":"text","value":" 命令，启动 webpack 进行项目的打包构建"}]},{"type":"element","tag":"h2","props":{"id":"_5-配置-webpack-打包入口以及输出入口"},"children":[{"type":"text","value":"5 配置 webpack 打包入口以及输出入口"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 webpack 4.x 和 5.x 的版本中，有如下的默认约定："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"① 默认的打包入口文件为 src -> index.js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"② 默认的输出文件路径为 dist -> main.js"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 webpack.config.js 配置文件中，通过 entry 节点指定打包的入口。通过 output 节点指定打包的出口。示例代码如下："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"const path = require('path') // 导入 node.js 中专门操作路径的模块\n\nmodule.exports = {\n    entry: path.join(__dirname,'./src/index.js'), // 打包入口文件的路径\n    output: {\n        path: path.join(__dirname,'./dist'), // 输出文件的存放路径\n        filename: 'bundle.js' // 输出文件的名称\n    }\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'path'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 导入 node.js 中专门操作路径的模块\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    entry: path."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(__dirname,"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'./src/index.js'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 打包入口文件的路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    output: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        path: path."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(__dirname,"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'./dist'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"), "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 输出文件的存放路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        filename: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'bundle.js'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 输出文件的名称\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_6-webpack-插件的作用"},"children":[{"type":"text","value":"6 webpack 插件的作用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"① webpack-dev-server"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"类似于 node.js 阶段用到的 nodemon 工具"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"每当修改了源代码，webpack 会自动进行项目的打包和构建"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装插件："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install webpack-dev-server -D"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"配置 webpack-dev-server ："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"修改 package.json -> srcripts 中的 dev 命令如下："},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"\"script\":{\n    \"dev\": \"webpack serve\", // script 节点下的脚本，可以通过 npm run 执行\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"script\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":":{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"dev\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"webpack serve\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// script 节点下的脚本，可以通过 npm run 执行\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"在 index.html 中，将 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script src=\"../dist/bundle.js\"></script>"}]},{"type":"text","value":" 替换为 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"<script src=\"/bundle.js\"></script>"}]},{"type":"text","value":" ，（因为是webpack_dev_server部署服务器(使用内存空间)地址在localhost:8080,所以可以直接使用\"/\"来访问，所以“/bundle.js”是从内存导入的）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"再次运行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm run dev"}]},{"type":"text","value":" 命令，重新进行项目的打包"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在浏览器中访问 "},{"type":"element","tag":"a","props":{"href":"http://localhost:8080","rel":["nofollow"]},"children":[{"type":"text","value":"http://localhost:8080"}]},{"type":"text","value":" 地址，查看自动打包效果"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"② html-webpack-plugin"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"webpack 中的 HTML 插件（类似于一个模板引擎插件）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"可以通过此插件自定制 index.html 页面的内容"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"安装插件："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install html-webpack-plugin -D"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"配置 html-webpack-plugin ："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"// 1. 导入 HTML 插件，得到一个构建函数\nconst HtmlPlugin = require('html-webpack-plugin')\n\n// 2. 创建 HTML 插件的实例对象\nconst htmlPlugin = new HtmlPlugin({\n    template: './src/index.html', // 指定源文件的存放路径\n    filname: './index.html', // 指定生成的文件的存放路径\n})\n\nmodule.exports = {\n    mode: 'development',\n    plugins: [htmlPlugin], // 3. 通过 plugins 节点，使 htmlPlugin 插件生效\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 1. 导入 HTML 插件，得到一个构建函数\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"HtmlPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'html-webpack-plugin'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 2. 创建 HTML 插件的实例对象\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"htmlPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"HtmlPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    template: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'./src/index.html'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 指定源文件的存放路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    filname: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'./index.html'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 指定生成的文件的存放路径\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    mode: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'development'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    plugins: [htmlPlugin], "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 3. 通过 plugins 节点，使 htmlPlugin 插件生效\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"HTML 插件在生成的 index.html 页面，自动注入了打包的 bundle.js 文件"}]}]},{"type":"element","tag":"h2","props":{"id":"_7-devserver-节点"},"children":[{"type":"text","value":"7 devServer 节点"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 webpack.config.js 配置文件中，可以通过 devServer 节点对 webpack-dev-server 插件进行更多的配置示例代码如下："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"devServer: {\n    open: true, // 初次打包完成后，自动打开浏览器\n    host: '127.0.0.1', // 实时打包所使用的主机地址\n    port: 80, // 实时打包所使用的端口号\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"devServer"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"open"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 初次打包完成后，自动打开浏览器\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"host"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'127.0.0.1'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 实时打包所使用的主机地址\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"port"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"80"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 实时打包所使用的端口号\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：凡是修改了 webpack.config.js 配置文件，或修改了 package.json 配置文件，必须重启实时打包的服务器，否则最新的配置文件无法生效！"}]},{"type":"element","tag":"h2","props":{"id":"_8-loader-概述"},"children":[{"type":"text","value":"8 loader 概述"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在实际开发过程中，webpack 默认智能打包处理以 .js 后缀名结尾的模块。其他非 .js 后缀名结尾的模块，webpack 默认处理不了，需要调用 loader 加载器才可以正常打包，否则会报错！"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"loader 加载器的作用：协助 webpack 打包处理特定的文件模块。比如："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"css-loader 可以打包处理 .css 相关的文件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"less-loader 可以打包处理 .less 相关的文件"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"babel-loader 可以打包处理 webpack 无法处理的高级 JS 语法"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"① 打包处理 css 文件"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"运行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm i style-loader css-loader -D"}]},{"type":"text","value":" 命令，安装处理 css 文件的 loader"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在webpack.config.js 的 module -> rules 数组中，添加 loader 规则如下："},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"module: { // 所有第三方文件模块的匹配规则\n    rules: [ // 文件后缀名的匹配规则\n        { test: /\\.css$/, use: ['style-loader', 'css-loader'] }\n    ]\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": { "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 所有第三方文件模块的匹配规则\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"rules"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": [ "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 文件后缀名的匹配规则\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        { test:"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-799289"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"css"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", use: ["}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'style-loader'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'css-loader'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"] }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"其中，test 表示匹配的文件类型， use 表示对应要调用的 loader"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"注意："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"use 数组中指定的 loader 顺序是固定的"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多个 loader 的调用顺序是：从后往前调用"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 index.js 中引入 css 文件，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"import './css/index.css'"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"② 打包处理 less 文件"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"运行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm i less-loader less -D"}]},{"type":"text","value":" 命令"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 webpack.config.js 的 module -> rules 数组中，添加 loader 规则如下："},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"module: {\n    rules: [\n        { test: /\\.less$/, use: ['style-loader', 'css-loader' , 'less-loader'] },\n    ]\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"rules"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        { test:"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-799289"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"less"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", use: ["}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'style-loader'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'css-loader'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" , "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'less-loader'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"] },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 index.js 中引入 less 文件，"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"import './css/index.less'"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"③ 打包处理样式表中与 url 路径相关的文件"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"运行 "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm i url-loader file-loader -D"}]},{"type":"text","value":" 命令"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 webpack.config.js 的 module -> rules 数组中，添加 loader 规则如下："},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"module: {\n    rules: [\n        { test: /\\.jpg|png|gif$/, use: 'url-loader?limit=22229' },\n    ]\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"rules"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        { test:"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-799289"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"jpg"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"png"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"gif"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", use: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'url-loader?limit=22229'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"其中 ？ 之后的是 loader 的参数项："},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"limit 用来指定图片的大小，单位是字节（byte）"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"只有 ≤ limit 大小的图片，才会被转为 base64 格式的图片"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"使用示例："},{"type":"element","tag":"code","props":{"className":["language-html"],"code":"<!-- html -->\n<img src=\"\" alt=\"\" class=\"box\">\n","language":"html","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"<!-- html -->\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-915666"},"children":[{"type":"text","value":"img"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"src"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"alt"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"box\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"// js\n// 1. 导入图片，得到图片文件\nimport logo from './images/logo.png'\n// 2. 给 img 标签的 src 动态赋值\n$('.box').attr('src',logo)\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// js\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 1. 导入图片，得到图片文件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" logo "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'./images/logo.png'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 2. 给 img 标签的 src 动态赋值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'.box'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"attr"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'src'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",logo)"}]}]}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"④ 打包处理 js 文件中的高级语法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"webpack 只能打包处理一部分高级的 JavaScript 语法。对于那些 webpack 无法处理的高级 js 语法，需要借助于 babel-loader 进行打包处理。例如 webpack 无法处理下面的 JavaScript 代码："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"// 1. 定义了名为 info 的在装饰器\nfunction info(target){\n    // 2. 为目标添加静态属性 info\n    target.info = 'Person info'\n}\n\n// 3. 为 Person 类应用 info 装饰器\n@info\nclass Person {}\n\n// 4. 打印 Person 的静态属性 info\nconsole.log(Person.info)\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 1. 定义了名为 info 的在装饰器\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"info"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-818538"},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 2. 为目标添加静态属性 info\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    target.info "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'Person info'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 3. 为 Person 类应用 info 装饰器\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"@info\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118310"},"children":[{"type":"text","value":"Person"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 4. 打印 Person 的静态属性 info\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"console."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(Person.info)"}]}]}]}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"运行如下的命令安装对应的依赖包："},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":" npm i babel-loader @babel/core @babel/plugin-proposal-decorators -D"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在 webpack.config.js 的 module->rules 数组中，添加 loader 规则如下："},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"// 注意： 必须使用 exclude 指定排除项，因为 node_modules 目录下的第三方包不需要被打包\n{ test: /\\.js$/, use: 'babel-loader', exclude: /node_modules/ }\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 注意： 必须使用 exclude 指定排除项，因为 node_modules 目录下的第三方包不需要被打包\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"{ "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-799289"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"js"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'babel-loader'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"exclude"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"node_modules"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" }"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在项目根目录下，创建名为 babel.config.js 的配置文件，定义 Babel 的配置项如下："},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"module.exports = {\n    // 声明 babel 可用的插件\n    // 将来，webpack 在调用 babel-loader 的时候，会先加载 plugins 中的插件来使用\n    plugins: [ [ '@babel/plugin-proposal-decorators', { legacy: true } ] ]\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 声明 babel 可用的插件\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 将来，webpack 在调用 babel-loader 的时候，会先加载 plugins 中的插件来使用\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    plugins: [ [ "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'@babel/plugin-proposal-decorators'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", { legacy: "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" } ] ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_9-配置-webpack-的打包发布"},"children":[{"type":"text","value":"9 配置 webpack 的打包发布"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"① 在 package.json 文件的 scripts 节点下，新增 build 命令如下："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"\"scripts\": {\n    \"build\": \"webpack --mode production\" // 项目发布时，运行 build 命令\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"build\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"webpack --mode production\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 项目发布时，运行 build 命令\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"--model 是一个参数项，用来指定 webpack 的运行模式。production 代表生产环境，会对打包生成的文件进行代码雅俗和性能优化。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"注意：通过 --model 指定的参数项，会覆盖 webpack.config.js 中的 model 选项。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"② 把 JavaScript 文件统一生产到 js 目录中"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 webpack.config.js 配置文件的 output 节点中，进行如下的配置："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"output: {\n    path: path.join(__dirname,'dist'),\n    // 明确告诉 webpack 把生成的 bundle.js 文件存放到 dist 目录下的 js 子目录中\n    filename: 'js/bundle.js',\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"output"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": path."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(__dirname,"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'dist'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"),\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 明确告诉 webpack 把生成的 bundle.js 文件存放到 dist 目录下的 js 子目录中\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"filename"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'js/bundle.js'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"③ 把图片文件统一生成到 image 目录中"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"修改 webpack.config.js 中的 url-loader 配置项，新增 outputPath 选项即可指定图片文件的输出路径："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"{\n    test: /\\.jpg|png|gif$/,\n    use: {\n        loader: 'url-loader',\n        options: {\n            limit: 22228,\n            // 明确指定把打包生成的图片文件，存储到 dist 目录下的 iamge 文件夹中\n            outputPath: 'image',\n        },\n    },\n}\n\n// 或者\n{ test: /\\.jpg|png|gif$/, use: 'url-loader?limit=470&outputPath=images' }\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-799289"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"jpg"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"png"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"gif"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"loader"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'url-loader'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"options"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"limit"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"22228"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 明确指定把打包生成的图片文件，存储到 dist 目录下的 iamge 文件夹中\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"outputPath"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'image'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 或者\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"{ "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-799289"},"children":[{"type":"text","value":"\\."}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"jpg"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"png"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"class":"ct-324907"},"children":[{"type":"text","value":"gif"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'url-loader?limit=470&outputPath=images'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" }"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在配置 url-loader 的时候，多个参数之间，使用 $ 符号进行分隔"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"④ 自动清理 dist 目录下的旧文件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了在每次打包发布时自动清理掉 dist 目录中的旧文件，可以安装并配置 clean-webpack-plugin 插件："}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"安装清理 dist 目录的 webpack 插件"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install clean-webpack-plugin -D"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"按需导入插件，得到插件的构造函数之后，创建插件的实例对象"},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"const { CleanWebpackPlugin } = require('clean-webpack-plugin') // 左侧的花括号是解构赋值\nconst cleanPlugin = new CleanWebpackPlugin()\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" { "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"CleanWebpackPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" } "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'clean-webpack-plugin'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 左侧的花括号是解构赋值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"cleanPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"CleanWebpackPlugin"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"()"}]}]}]}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"把创建的 cleanPlugin 插件实力对象，挂载到 plugins 节点中"},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"plugins: [cleanPlugin], // 挂载插件\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-048615"},"children":[{"type":"text","value":"plugins"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": [cleanPlugin], "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 挂载插件"}]}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"_10-source-map"},"children":[{"type":"text","value":"10 Source Map"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Source Map 就是一个信息文件，里面储存着位置信息。也就是说，Source Map 文件中储存着压缩后的代码，所对应的转换前的位置。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有了它，出错的时候，除错工具将直接显示原始代码，而不是转换后的代码，能够极大的方便后期的调试。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"开发环境下默认生成的 Source Map，记录的是生成后的代码的位置。会导致运行时报错的行数与源代码的行数不一致的问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"开发环境下，推荐在 webpack.config.js 中添加如下的配置，即可保证运行时报错的行数与源代码的行数保持一致："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"module.exports = {\n    mode: 'development',\n    // eval-source-map 仅限在“开发模式”下使用，不建议在“生产模式”下使用。\n    // 此选项生成的 Source Map 能够保证“运行时报错的行数”与“源代码的行数”保持一致\n    devtool: 'eval-source-map',\n    // 省略其它配置项...\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    mode: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'development'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// eval-source-map 仅限在“开发模式”下使用，不建议在“生产模式”下使用。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 此选项生成的 Source Map 能够保证“运行时报错的行数”与“源代码的行数”保持一致\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    devtool: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'eval-source-map'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 省略其它配置项...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在生产环境下，如果省略了 devtool 选项，则最终生成的文件不包含 Source Map。这能够防止原始代码通过 Source Map 的形式暴露给别有所图之人。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在生产环境下，如果只想定位报错的具体行数，且不想暴露源码。此时可以将 devtool 的值设置为 nosources-source-map 。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Source Map 的最佳实践："}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"① 开发环境下："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"建议把 devtool 的值设置为 eval-source-map"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"好处：可以精准定位到具体的错误行"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"② 生产环境下："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"建议关闭 Source Map 或将 devtool 的值设置为 nosources-source-map"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"好处：防止源码泄露，提高网站的安全性"}]}]},{"type":"element","tag":"h2","props":{"id":"_11"},"children":[{"type":"text","value":"11 @"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"建议大家使用 @ 表示 src 源代码目录，从外往里查找；不要使用 ../ 从里往外查找"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用 @ 之前，需要在 webpack.config.js 中配置："}]},{"type":"element","tag":"code","props":{"className":["language-javascript"],"code":"module.exports = {\n    // ...\n    resolve: {\n        alias: {\n            // 告诉 webpack ，程序员写的代码中，@ 符号表示 src 这一层目录\n            '@': path.join(__dirname,'./src/')\n        },\n    },\n    // ...\n}\n","language":"javascript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-667354"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    resolve: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        alias: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 告诉 webpack ，程序员写的代码中，@ 符号表示 src 这一层目录\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'@'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": path."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"join"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(__dirname,"}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'./src/'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// ...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-667354{color:#005CC5;}\n.dark .ct-667354{color:#79B8FF;}\n.sepia .ct-667354{color:#66D9EF;font-style:italic;}\n.ct-248813{color:#24292E;}\n.dark .ct-248813{color:#E1E4E8;}\n.sepia .ct-248813{color:#F8F8F2;}\n.ct-257789{color:#D73A49;}\n.dark .ct-257789{color:#F97583;}\n.sepia .ct-257789{color:#F92672;}\n.ct-088893{color:#032F62;}\n.dark .ct-088893{color:#9ECBFF;}\n.sepia .ct-088893{color:#E6DB74;}\n.ct-080019{color:#6A737D;}\n.sepia .ct-080019{color:#88846F;}\n.ct-391872{color:#D73A49;}\n.dark .ct-391872{color:#F97583;}\n.sepia .ct-391872{color:#66D9EF;font-style:italic;}\n.ct-900255{color:#005CC5;}\n.dark .ct-900255{color:#79B8FF;}\n.sepia .ct-900255{color:#F8F8F2;}\n.ct-118306{color:#6F42C1;}\n.dark .ct-118306{color:#B392F0;}\n.sepia .ct-118306{color:#A6E22E;}\n.ct-048615{color:#6F42C1;}\n.dark .ct-048615{color:#B392F0;}\n.sepia .ct-048615{color:#F8F8F2;}\n.ct-390898{color:#005CC5;}\n.dark .ct-390898{color:#79B8FF;}\n.sepia .ct-390898{color:#AE81FF;}\n.ct-324907{color:#032F62;}\n.dark .ct-324907{color:#DBEDFF;}\n.sepia .ct-324907{color:#E6DB74;}\n.ct-799289{color:#22863A;font-weight:bold;}\n.dark .ct-799289{color:#85E89D;font-weight:bold;}\n.sepia .ct-799289{color:#AE81FF;font-weight:unset;}\n.ct-915666{color:#22863A;}\n.dark .ct-915666{color:#85E89D;}\n.sepia .ct-915666{color:#F92672;}\n.ct-818538{color:#E36209;}\n.dark .ct-818538{color:#FFAB70;}\n.sepia .ct-818538{color:#FD971F;font-style:italic;}\n.ct-118310{color:#6F42C1;}\n.dark .ct-118310{color:#B392F0;}\n.sepia .ct-118310{color:#A6E22E;text-decoration:bold;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_1-初始化包管理配置文件","depth":2,"text":"1 初始化包管理配置文件"},{"id":"_2-安装jquery","depth":2,"text":"2 安装jQuery"},{"id":"_3-在项目中安装webpack","depth":2,"text":"3 在项目中安装webpack"},{"id":"_4-在项目中配置webpack","depth":2,"text":"4 在项目中配置webpack"},{"id":"_5-配置-webpack-打包入口以及输出入口","depth":2,"text":"5 配置 webpack 打包入口以及输出入口"},{"id":"_6-webpack-插件的作用","depth":2,"text":"6 webpack 插件的作用"},{"id":"_7-devserver-节点","depth":2,"text":"7 devServer 节点"},{"id":"_8-loader-概述","depth":2,"text":"8 loader 概述"},{"id":"_9-配置-webpack-的打包发布","depth":2,"text":"9 配置 webpack 的打包发布"},{"id":"_10-source-map","depth":2,"text":"10 Source Map"},{"id":"_11","depth":2,"text":"11 @"}]}},"_type":"markdown","_id":"content:blog:dev-notes:初学Webpack.md","_source":"content","_file":"blog/dev-notes/初学Webpack.md","_extension":"md"}