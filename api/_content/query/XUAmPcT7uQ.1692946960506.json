{"_path":"/blog/vuejs/pinia","_dir":"vuejs","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Pinia基础使用","description":"Pinia基础使用。","slug":"pinia-basic-use","category":"vuejs","createtime":"2023-08-23 10:25","cover":"/images/content/cover/pinia.png","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"pinia-基础使用"},"children":[{"type":"text","value":"Pinia 基础使用"}]},{"type":"element","tag":"h3","props":{"id":"_1-安装"},"children":[{"type":"text","value":"1 安装"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install pinia"}]}]},{"type":"element","tag":"h3","props":{"id":"_2-框架"},"children":[{"type":"text","value":"2 框架"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"路径：src -> store -> index.ts"}]},{"type":"element","tag":"code","props":{"className":["language-typescript"],"code":"import {defineStore} from \"pinia\";\n\nexport const useMainStore = defineStore('main', {\n    state: () => {\n        return {}\n    },\n    \n    getters: {},\n\n    actions: {}\n})\n","language":"typescript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {defineStore} "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"pinia\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"useMainStore"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"defineStore"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'main'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    getters: {},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    actions: {}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_3-说明"},"children":[{"type":"text","value":"3 说明"}]},{"type":"element","tag":"code","props":{"className":["language-typescript"],"code":"import {defineStore} from \"pinia\";\n\n// 定义并导出容器\n// 参数1：容器的 ID，必须唯一，将来 Pinia 会把所有的容器挂载到根容器\n// 参数2：选项对象\n// 返回值：一个函数，调用得到容器实例\n// 返回值：一个函数，调用得到容器实例\nexport const useMainStore = defineStore('main', {\n    /*\n    * 类似于组件的 data，用来存储全局状态的\n    * 1. 必须是函数，这样是为了在服务端渲染的时候避免交叉请求导致的数据状态污染\n    * 2. 必须是箭头函数，这样是为了更好的 TS 类型推导\n    * */\n    state: () => {\n        return {\n            count: 100,\n            foo: 'bar',\n            arr: [1,2,3]\n        }\n    },\n\n    /*\n    * 类似于组件的 computed，用来封装计算属性，有缓存的功能\n    * */\n    getters: {\n        // 函数接受一个可选参数： state 状态对象\n        count10 (state){\n            return state.count + 10\n        }\n\n        // 如果在 getters 中使用了 this 则必须手动指定返回值的类型，否则类型推导不出来\n        // count10():number {\n        //     return this.count + 10\n        // }\n    },\n\n    /*\n    * 类似于组件的 methods，封装业务逻辑，修改 state\n    * */\n    actions: {\n        // 注意：不能使用箭头函数定义 action，因为箭头函数绑定外部 this\n        changeState(){\n            this.count++\n            this.foo = 'hello'\n            this.arr.push(4)\n\n            // this.$patch({})\n            // this.$patch(state =>{})\n        }\n    }\n})\n","language":"typescript","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {defineStore} "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"pinia\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 定义并导出容器\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 参数1：容器的 ID，必须唯一，将来 Pinia 会把所有的容器挂载到根容器\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 参数2：选项对象\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 返回值：一个函数，调用得到容器实例\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 返回值：一个函数，调用得到容器实例\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"useMainStore"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"defineStore"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'main'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"/*\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * 类似于组件的 data，用来存储全局状态的\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * 1. 必须是函数，这样是为了在服务端渲染的时候避免交叉请求导致的数据状态污染\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * 2. 必须是箭头函数，这样是为了更好的 TS 类型推导\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":": () "}]},{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            count: "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"100"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            foo: "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'bar'"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            arr: ["}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":","}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"/*\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * 类似于组件的 computed，用来封装计算属性，有缓存的功能\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    getters: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 函数接受一个可选参数： state 状态对象\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"count10"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-818538"},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" state.count "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"10\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 如果在 getters 中使用了 this 则必须手动指定返回值的类型，否则类型推导不出来\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":32},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// count10():number {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":33},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"//     return this.count + 10\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":34},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":35},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":36},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":37},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"/*\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":38},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * 类似于组件的 methods，封装业务逻辑，修改 state\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":39},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"    * */\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":40},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    actions: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":41},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 注意：不能使用箭头函数定义 action，因为箭头函数绑定外部 this\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":42},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"changeState"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(){\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":43},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-572354"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":".count"}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"++\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":44},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-572354"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":".foo "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'hello'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":45},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-572354"},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":".arr."}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-390898"},"children":[{"type":"text","value":"4"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":46},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":47},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// this.$patch({})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":48},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// this.$patch(state =>{})\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":49},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"        }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":50},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":51},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"_4-调用"},"children":[{"type":"text","value":"4 调用"}]},{"type":"element","tag":"code","props":{"className":["language-vue"],"code":"<template>\n  <p>{{ mainStore.count }}</p>\n</template>\n\n<script lang=\"ts\" setup>\nimport {useMainStore} from '../store'\nimport {storeToRefs} from \"pinia\";\n\nconst mainStore = useMainStore()\n\n// 解构 Pinia 中的数据需要用以下方式，否则会丢失响应\nconst {count, foo} = storeToRefs(mainStore)\n\n</script>\n","language":"vue","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-915666"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-915666"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":">{{ mainStore.count }}</"}]},{"type":"element","tag":"span","props":{"class":"ct-915666"},"children":[{"type":"text","value":"p"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-915666"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-915666"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"lang"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"ts\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {useMainStore} "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"'../store'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {storeToRefs} "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-088893"},"children":[{"type":"text","value":"\"pinia\""}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":";\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"mainStore"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"useMainStore"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-080019"},"children":[{"type":"text","value":"// 解构 Pinia 中的数据需要用以下方式，否则会丢失响应\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-391872"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" {"}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"count"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-900255"},"children":[{"type":"text","value":"foo"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"} "}]},{"type":"element","tag":"span","props":{"class":"ct-257789"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-118306"},"children":[{"type":"text","value":"storeToRefs"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"(mainStore)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-915666"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-248813"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-257789{color:#D73A49;}\n.dark .ct-257789{color:#F97583;}\n.sepia .ct-257789{color:#F92672;}\n.ct-248813{color:#24292E;}\n.dark .ct-248813{color:#E1E4E8;}\n.sepia .ct-248813{color:#F8F8F2;}\n.ct-088893{color:#032F62;}\n.dark .ct-088893{color:#9ECBFF;}\n.sepia .ct-088893{color:#E6DB74;}\n.ct-391872{color:#D73A49;}\n.dark .ct-391872{color:#F97583;}\n.sepia .ct-391872{color:#66D9EF;font-style:italic;}\n.ct-900255{color:#005CC5;}\n.dark .ct-900255{color:#79B8FF;}\n.sepia .ct-900255{color:#F8F8F2;}\n.ct-118306{color:#6F42C1;}\n.dark .ct-118306{color:#B392F0;}\n.sepia .ct-118306{color:#A6E22E;}\n.ct-080019{color:#6A737D;}\n.sepia .ct-080019{color:#88846F;}\n.ct-390898{color:#005CC5;}\n.dark .ct-390898{color:#79B8FF;}\n.sepia .ct-390898{color:#AE81FF;}\n.ct-818538{color:#E36209;}\n.dark .ct-818538{color:#FFAB70;}\n.sepia .ct-818538{color:#FD971F;font-style:italic;}\n.ct-572354{color:#005CC5;}\n.dark .ct-572354{color:#79B8FF;}\n.sepia .ct-572354{color:#FD971F;}\n.ct-915666{color:#22863A;}\n.dark .ct-915666{color:#85E89D;}\n.sepia .ct-915666{color:#F92672;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"_1-安装","depth":3,"text":"1 安装"},{"id":"_2-框架","depth":3,"text":"2 框架"},{"id":"_3-说明","depth":3,"text":"3 说明"},{"id":"_4-调用","depth":3,"text":"4 调用"}]}},"_type":"markdown","_id":"content:blog:vuejs:Pinia基础使用.md","_source":"content","_file":"blog/vuejs/Pinia基础使用.md","_extension":"md"}